language: java
jdk:
- oraclejdk8
env:
  global:
  - GIT_NAME: Travis CI
  - GIT_EMAIL: builds@travis-ci.org
  - GIT_BRANCH: master
  - ENCRYPTION_LABEL: ccd276b8e5b2
  - secure: paRGwC3C+DimVS7vPc8oBHp+KfaCueY17rBM7a3Ce4lM5qajvO1UfJl5Y9rPYMmasHwdnufV8GdHiQAjbUurlO9DjXRipZujbRMmZpgl3Mep5EXr9CHANYEm/vRmfb05GhiqkZzFdbenm1Q8PUPI/WTnMQ8cji/eVRQqRJEG4Royjyr7wR9nKOntK/qtc/1WVB8F4sA2HbLUvlhqpGypDhtrEz6uBUHpkHPio1xrPoH8NJ88/f7rEgBcsZ022dX2Og374GtyEwCbXV6Q0lczOumWQyFrlw9r415O8zc1aYFovA8UdlzkwMUXhBv/Li/JvIWIOPAtb6r6WE4HtTdRCcIjEtjunM9YGw5FMHVkYidT9OWEnOEcNE0DK2C13KIN5zTp3o5W3YoiMo2c8MeQTRDI1oauXM2dF7VbPrtoJxgWdB3iHbT4q5gQgVWOBTwTd6xk7wp1XqDg240hbfeZU4/2xmw7r4Qc0X2K8S2rDQgP8eNp1VL+k07JNoz0KBu34Xhp3O1wETCFHSbrImVZAsVhSuVvfphDHRlCobI84fLQXmPeNF2f0T3EZhq5/Fz4OaiSbdPtsGDnz3uOdE9cwumL0OiSZgCDiXTAxeTgS2mJh9HtpYsG9iuoXQq6b8l6j5QBL8F+P2t7VZ+B4vRu0yj4ikOHjkAFHjxdv8cj760=
  - secure: RYk55/Y5CVNBHZEABrvi1JS23eu5E5uBUIUqvW7ASH6DShNM1r9HkOurcx3gw7NmxvnfDnD0kUQFis9ULux732tkIJBl5QuX+rOyRRDbWpYdh3ukI+NHexZEPXohwAk2fkdVPZkOTAkEfDnmWe0ElBLljfe8me33rgFmzfXwZdvYYnAJnu5JMuWRM42T/QLJnQTrO5YY3Qqv52Ndu+Cf+aq7+OUer8FVc3ECTiS9TSWLzM6wYt+x2hIMo3B5YHxOI0grY+JQvq0xTRo0AJhxaEQizPz3w52K4hqZwoP1DxQc0hGsdzspk2T4NnA3iMI8Uxu3sk2LSjd8FY9Plg8yiZqDl7I3kJKvuAFcHCVk2VkW760sAhrrcaRo9JZ5YjcvpSHIZaT47A9sbFUqFZVpfGjmSgon8sYBDllPJJh0WdpV2bu10y4ZUlT2QJ4ODONF7ZLFI5ZncagabMhFwPEC4BWrPK0NV+uHUHeKu2I08ssVZkwP5bXQBjTKfWnWN25ZCQZe1IckMv2wolIEJi38Ylj+udPPZEI4MD+W6T1MlawhEvellOmJ9jhmXJB3iQZsgsc36n+qODilZXCgRdPS1s1egpwL8iQB+m0d6/yIePW6A/yPGceYumuq0iIBDiDZ3ZaZQd9YVAnT0Z7AjoSWOfd1i288Tavx6EY/lgQ1qWs=
branches:
  only:
  - master
os:
- linux
dist: trusty
sudo: required
before_install:
- openssl aes-256-cbc -K $encrypted_ccd276b8e5b2_key -iv $encrypted_ccd276b8e5b2_iv
  -in id_rsa.pub.enc -out $HOME/.ssh/id_rsa.pub -d
- wget https://archive.apache.org/dist/maven/maven-3/3.3.9/binaries/apache-maven-3.3.9-bin.zip
- unzip -qq apache-maven-3.3.9-bin.zip
- export M2_HOME=$PWD/apache-maven-3.3.9
- export PATH=$M2_HOME/bin:$PATH
jobs:
  include:
  - stage: test
    script: ./runmvnprofile.sh gw4e-eclipse-plugin-tests
  - script: ./runmvnprofile.sh gw4e-eclipse-plugin-ui-tests
  - script: ./runmvnprofile.sh gw4e-eclipse-studio-tests
  - script: ./runmvnprofile.sh gw4e-eclipse-studio-ui-tests
  - stage: deploy
    script: ./upload.sh
